{
  "name": "Is Analytics Session Count",
  "id": "IsAnalyticsSessionCount",
  "thumbnailURL": "",
  "configs": {
    "pubsub": {
      "types": [
        "subscriber"
      ]
    },
    "providerConfig": {
      "configs": {
        "type": "SiddhiStoreDataProvider",
        "config": {
          "siddhiApp": "@store(type='rdbms', datasource='IS_ANALYTICS_DB') @primaryKey('meta_tenantId', 'sessionId') @Index('username','userstoreDomain','tenantDomain') define table SessionInformationTable ( meta_tenantId int, sessionId string, startTime string, terminateTime string, endTime string, duration long, isActive bool, username string, userstoreDomain string, remoteIp string, region string, tenantDomain string, serviceProvider string, identityProviders string, rememberMeFlag bool, userAgent string, usernameWithTenantDomainAndUserstoreDomain string, currentTime string, startTimestamp long, renewTimestamp long, terminationTimestamp long, endTimestamp long, timestamp long);",
          "queryData": {
            "query": "from SessionInformationTable on (duration >= 0 and duration <= 900001) and (startTimestamp >= 0 AND startTimestamp <= {{to}}L ) AND ((endTimestamp >= {{from}}L AND endTimestamp <= {{now}}L) OR isActive == true) select '1' as id, ' < 15 mins' as duration, count() as count1",
            "query2": "from SessionInformationTable on (duration >= 900001 and duration <= 3600001) and (startTimestamp >= 0 AND startTimestamp <= {{to}}L ) AND ((endTimestamp >= {{from}}L AND endTimestamp <= {{now}}L) OR isActive == true) select '2' as id, ' < 1 hr' as duration, count() as count1",
            "query3": "from SessionInformationTable on (duration >= 3600001 and duration <= 43200001) and (startTimestamp >= 0 AND startTimestamp <= {{to}}L ) AND ((endTimestamp >= {{from}}L AND endTimestamp <= {{now}}L) OR isActive == true) select '3' as id, ' < 12 hrs' as duration, count() as count1",
            "query4": "from SessionInformationTable  on (duration >= 43200001 and duration <= 86400001) and (startTimestamp >= 0 AND startTimestamp <= {{to}}L ) AND ((endTimestamp >= {{from}}L AND endTimestamp <= {{now}}L) OR isActive == true) select '4' as id, ' < 24 hrs' as duration, count() as count1",
            "query5": "from SessionInformationTable  on (duration >= 86400001 and duration <= 3155760000000L) and (startTimestamp >= 0 AND startTimestamp <= {{to}}L ) AND ((endTimestamp >= {{from}}L AND endTimestamp <= {{now}}L) OR isActive == true) select '5' as id, ' > 24 hrs' as duration, count() as count1"
          },
          "publishingInterval": 60
        }
      }
    }
  }
}

